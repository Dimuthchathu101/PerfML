<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Test Website</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .card p {
            color: #555;
            margin-bottom: 15px;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .hero-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .hero-section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .hero-section p {
            color: #555;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
            color: #667eea;
        }

        .footer {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .footer p {
            color: #7f8c8d;
        }

        /* Heavy content for performance testing */
        .heavy-content {
            display: none;
        }

        .heavy-content img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            margin: 10px 0;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .hero-section h2 {
                font-size: 1.5em;
            }
        }

        /* Animation for layout shift testing */
        .animated-content {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header animated-content">
            <h1>üöÄ Performance Test Website</h1>
            <p>Comprehensive testing platform for ML-driven performance optimization</p>
        </div>

        <div class="hero-section animated-content">
            <h2>Welcome to Our Performance Testing Platform</h2>
            <p>This website is designed to test various performance metrics including First Contentful Paint (FCP), Largest Contentful Paint (LCP), Time to Interactive (TTI), and Cumulative Layout Shift (CLS).</p>
            <button class="btn" onclick="loadHeavyContent()">Load Heavy Content</button>
        </div>

        <div class="content-grid">
            <div class="card animated-content">
                <h3>üìä API Performance</h3>
                <p>Test various API endpoints with different load conditions and response times.</p>
                <button class="btn" onclick="testAPI()">Test API</button>
            </div>

            <div class="card animated-content">
                <h3>üéØ Frontend Metrics</h3>
                <p>Monitor Core Web Vitals and user experience metrics in real-time.</p>
                <button class="btn" onclick="showMetrics()">Show Metrics</button>
            </div>

            <div class="card animated-content">
                <h3>üîç Load Testing</h3>
                <p>Simulate different user scenarios and network conditions for comprehensive testing.</p>
                <button class="btn" onclick="startLoadTest()">Start Load Test</button>
            </div>

            <div class="card animated-content">
                <h3>üìà ML Insights</h3>
                <p>Get AI-powered insights and predictions for performance optimization.</p>
                <button class="btn" onclick="getMLInsights()">Get Insights</button>
            </div>
        </div>

        <div class="features">
            <div class="feature animated-content">
                <div class="feature-icon">‚ö°</div>
                <h3>Fast Response</h3>
                <p>Optimized for quick loading and smooth interactions</p>
            </div>
            <div class="feature animated-content">
                <div class="feature-icon">üõ°Ô∏è</div>
                <h3>Reliable</h3>
                <p>Built with error handling and fallback mechanisms</p>
            </div>
            <div class="feature animated-content">
                <div class="feature-icon">üì±</div>
                <h3>Responsive</h3>
                <p>Works seamlessly across all devices and screen sizes</p>
            </div>
            <div class="feature animated-content">
                <div class="feature-icon">üîß</div>
                <h3>Scalable</h3>
                <p>Designed to handle increasing load and traffic</p>
            </div>
        </div>

        <div class="heavy-content" id="heavyContent">
            <div class="card">
                <h3>Heavy Content Section</h3>
                <p>This section contains heavy content to test performance under load.</p>
                <div id="dynamicContent"></div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2024 Performance ML Platform. Built for comprehensive performance testing and optimization.</p>
        </div>
    </div>

    <script>
        // Performance monitoring
        let startTime = performance.now();
        
        // Track Core Web Vitals
        function trackCoreWebVitals() {
            // First Contentful Paint
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log('FCP:', entry.startTime);
                    document.dispatchEvent(new CustomEvent('fcp', { detail: entry.startTime }));
                }
            }).observe({ entryTypes: ['paint'] });

            // Largest Contentful Paint
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log('LCP:', entry.startTime);
                    document.dispatchEvent(new CustomEvent('lcp', { detail: entry.startTime }));
                }
            }).observe({ entryTypes: ['largest-contentful-paint'] });

            // First Input Delay
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log('FID:', entry.processingStart - entry.startTime);
                    document.dispatchEvent(new CustomEvent('fid', { 
                        detail: entry.processingStart - entry.startTime 
                    }));
                }
            }).observe({ entryTypes: ['first-input'] });

            // Cumulative Layout Shift
            let clsValue = 0;
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    if (!entry.hadRecentInput) {
                        clsValue += entry.value;
                        console.log('CLS:', clsValue);
                        document.dispatchEvent(new CustomEvent('cls', { detail: clsValue }));
                    }
                }
            }).observe({ entryTypes: ['layout-shift'] });
        }

        // Initialize performance tracking
        trackCoreWebVitals();

        // API Testing Functions
        async function testAPI() {
            const endpoints = [
                '/api/health',
                '/api/data/test',
                '/api/search?q=performance',
                '/api/users?page=1&limit=10'
            ];

            for (const endpoint of endpoints) {
                try {
                    const start = performance.now();
                    const response = await fetch(endpoint);
                    const end = performance.now();
                    
                    console.log(`${endpoint}: ${end - start}ms, Status: ${response.status}`);
                } catch (error) {
                    console.error(`Error testing ${endpoint}:`, error);
                }
            }
        }

        function showMetrics() {
            const metrics = {
                'Page Load Time': `${(performance.now() - startTime).toFixed(2)}ms`,
                'DOM Content Loaded': `${performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart}ms`,
                'Window Load': `${performance.timing.loadEventEnd - performance.timing.navigationStart}ms`
            };

            alert('Performance Metrics:\n' + Object.entries(metrics).map(([k, v]) => `${k}: ${v}`).join('\n'));
        }

        function startLoadTest() {
            alert('Load testing simulation started. Check console for results.');
            
            // Simulate multiple concurrent requests
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    testAPI();
                }, i * 100);
            }
        }

        function getMLInsights() {
            alert('ML insights would be generated here based on collected performance data.');
        }

        function loadHeavyContent() {
            const heavyContent = document.getElementById('heavyContent');
            const dynamicContent = document.getElementById('dynamicContent');
            
            // Create heavy content to test performance
            let content = '';
            for (let i = 0; i < 100; i++) {
                content += `
                    <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                        <h4>Content Item ${i + 1}</h4>
                        <p>This is heavy content item number ${i + 1} designed to test performance under load.</p>
                        <div style="height: 50px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 3px;"></div>
                    </div>
                `;
            }
            
            dynamicContent.innerHTML = content;
            heavyContent.style.display = 'block';
            
            // Trigger layout shift for testing
            heavyContent.scrollIntoView({ behavior: 'smooth' });
        }

        // Track user interactions for TTI
        document.addEventListener('click', function() {
            const tti = performance.now() - startTime;
            console.log('TTI (estimated):', tti + 'ms');
            document.dispatchEvent(new CustomEvent('tti', { detail: tti }));
        }, { once: true });

        // Report performance metrics
        window.addEventListener('load', function() {
            const loadTime = performance.now() - startTime;
            console.log('Total Load Time:', loadTime + 'ms');
            
            // Send metrics to backend (in real implementation)
            fetch('/api/metrics', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    loadTime: loadTime,
                    timestamp: new Date().toISOString()
                })
            }).catch(console.error);
        });
    </script>
</body>
</html>
